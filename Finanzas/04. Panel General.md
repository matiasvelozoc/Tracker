# 游늵 Panel Financiero General

## 游눶 Cubetas
```dataview
TABLE nombre AS "Cubeta", porcentaje_asignado AS "%", saldo_actual AS "Saldo (CLP)"
FROM "Finanzas/02. Cubetas"
WHERE type = "cubeta"
SORT porcentaje_asignado DESC
```

---

## 游꿢 Metas
```dataview
TABLE nombre AS "Meta", ahorrado_actual AS "Ahorrado", meta_total AS "Objetivo", round(ahorrado_actual/meta_total*100,1) AS "Progreso (%)", plazo AS "Plazo"
FROM "Finanzas/03. Metas"
WHERE type = "meta"
SORT plazo ASC
```

---

## 游늳 Ahorro mensual (resumen)
```dataview
TABLE month AS "Mes", ingresos, egresos, ahorros
FROM "Finanzas/01. Flujo Mensual"
WHERE type = "flujo_mensual"
SORT month ASC
```

---

## 游늴 Gr치ficos r치pidos (Dataview + DataviewJS)
> Nota: los gr치ficos usan DataviewJS y la librer칤a Chart.js embebida por DataviewJS en Obsidian si tu instalaci칩n lo permite.

```dataviewjs
// Gr치fico: Ahorro mensual (ingresos vs ahorros)
const pages = dv.pages('"Finanzas/01. Flujo Mensual"').where(p => p.type == 'flujo_mensual').sort(p => p.month)
const labels = pages.map(p => p.month)
const ingresos = pages.map(p => {
  return p.ingresos ? p.ingresos.map(i => Object.values(i)[0]).reduce((a,b)=>a+b,0) : 0
})
const ahorros = pages.map(p => {
  return p.ahorros ? p.ahorros.map(i => Object.values(i)[0]).reduce((a,b)=>a+b,0) : 0
})
// Insertar canvas
dv.span('<canvas id="chartAhorro" width="600" height="240"></canvas>')
const ctx = document.getElementById('chartAhorro').getContext('2d')
new Chart(ctx, { type: 'bar', data: { labels, datasets: [{ label: 'Ingresos', data: ingresos }, { label: 'Ahorros', data: ahorros }] }, options: {} })
```
